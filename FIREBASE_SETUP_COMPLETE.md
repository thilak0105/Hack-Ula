# Firebase Backend Setup - Complete Guide

## âœ… What We're Doing

Setting up Firebase as your backend for:
- ğŸ“¦ Course data storage
- ğŸ‘¤ User progress tracking  
- ğŸ”„ Data sync across devices
- âœ… **NOT for AI** (AI runs on-device)

---

## ğŸ“‹ Step-by-Step Setup

### Step 1: Create Firebase Project

1. **Go to:** https://console.firebase.google.com/
2. **Click:** "Add project"
3. **Project name:** `MentoraMobile`
4. **Google Analytics:** Disable (optional)
5. **Click:** Create project
6. **Wait:** ~30 seconds
7. **Click:** Continue

âœ… **Done\!** Your Firebase project is ready.

---

### Step 2: Get Firebase Config

1. **Click** the web icon `</>` (Add app)
2. **App nickname:** `MentoraMobile`
3. **Click:** Register app
4. **Copy** the firebaseConfig object:

```javascript
const firebaseConfig = {
  apiKey: "AIza...",
  authDomain: "your-app.firebaseapp.com",
  projectId: "your-project-id",
  storageBucket: "your-app.appspot.com",
  messagingSenderId: "123456789",
  appId: "1:123:web:abc123"
};
```

**ğŸ“‹ SAVE THIS CONFIG\!** You'll need it in Step 5.

---

### Step 3: Enable Firestore Database

1. **Left menu:** Click "Firestore Database"
2. **Click:** "Create database"
3. **Mode:** Select "Start in test mode"
4. **Location:** Choose your region (closest to you)
5. **Click:** Enable
6. **Wait:** ~1 minute

âœ… **Done\!** Database is ready.

---

### Step 4: Set Up Security Rules (Important\!)

1. **In Firestore,** click "Rules" tab
2. **Replace** the rules with:

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Allow read/write to courses
    match /courses/{courseId} {
      allow read, write: if true; // Everyone can read/write (for now)
    }
    
    // Allow read/write to progress
    match /progress/{progressId} {
      allow read, write: if true; // Everyone can read/write (for now)
    }
  }
}
```

3. **Click:** Publish

**âš ï¸ Note:** This is for development. In production, add proper authentication\!

---

### Step 5: Update Your React App

#### A. Install Firebase

In your React project:

```bash
cd /tmp/Code-O-Clock/frontend
npm install firebase
```

#### B. Add Firebase Config

1. **Open:** `src/firebase/config.js` (already created)
2. **Replace** `YOUR_API_KEY`, etc. with your actual Firebase config from Step 2:

```javascript
const firebaseConfig = {
  apiKey: "YOUR_ACTUAL_API_KEY_HERE",
  authDomain: "YOUR_ACTUAL_AUTH_DOMAIN",
  projectId: "YOUR_ACTUAL_PROJECT_ID",
  storageBucket: "YOUR_ACTUAL_STORAGE_BUCKET",
  messagingSenderId: "YOUR_ACTUAL_SENDER_ID",
  appId: "YOUR_ACTUAL_APP_ID"
};
```

---

### Step 6: Use Firebase in Your Components

#### Example 1: Save Course Generated by AI

```jsx
import React, { useState } from 'react';
import { saveCourse } from './firebase/courseService';

function CourseGenerator() {
  const [course, setCourse] = useState(null);

  const generateAndSaveCourse = () => {
    // Generate course using ON-DEVICE AI
    window.Android.generateText(coursePrompt, async (response) => {
      try {
        const courseData = JSON.parse(response);
        setCourse(courseData);
        
        // Save to Firebase
        const result = await saveCourse(courseData);
        if (result.success) {
          console.log('âœ… Course saved to Firebase\!', result.id);
          window.Android.showToast('Course saved\!');
        }
      } catch (e) {
        console.error('Error:', e);
      }
    });
  };

  return (
    <div>
      <button onClick={generateAndSaveCourse}>
        Generate & Save Course
      </button>
      {course && <div>{/* Display course */}</div>}
    </div>
  );
}
```

#### Example 2: Load Saved Courses

```jsx
import React, { useState, useEffect } from 'react';
import { getCourses } from './firebase/courseService';

function CourseList() {
  const [courses, setCourses] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    loadCourses();
  }, []);

  const loadCourses = async () => {
    setLoading(true);
    const data = await getCourses();
    setCourses(data);
    setLoading(false);
  };

  if (loading) return <div>Loading courses...</div>;

  return (
    <div>
      <h2>My Courses ({courses.length})</h2>
      {courses.map(course => (
        <div key={course.id}>
          <h3>{course.course}</h3>
          <p>Modules: {course.modules?.length}</p>
          <small>{new Date(course.createdAt).toLocaleDateString()}</small>
        </div>
      ))}
    </div>
  );
}
```

#### Example 3: Save User Progress

```jsx
import { saveProgress, getProgress } from './firebase/courseService';

// Save progress
async function markLessonComplete(userId, courseId, lessonId) {
  const result = await saveProgress(userId, {
    courseId,
    lessonId,
    completed: true,
    completedAt: new Date().toISOString()
  });
  
  if (result.success) {
    console.log('âœ… Progress saved\!');
  }
}

// Load progress
async function loadUserProgress(userId) {
  const progress = await getProgress(userId);
  console.log('User progress:', progress);
  return progress;
}
```

---

### Step 7: Update Navigation to Work

Now fix the navigation issue by removing backend dependency:

```jsx
// OLD CODE (doesn't work)
const handleNext = async () => {
  await fetch('http://localhost:5000/process', {...});
  navigate('/next-page');
};

// NEW CODE (works\!)
const handleNext = () => {
  // Just save data locally or to Firebase
  const formData = {
    url: inputUrl,
    type: selectedType
  };
  
  // Option 1: Save to localStorage
  localStorage.setItem('formData', JSON.stringify(formData));
  
  // Option 2: Save to Firebase (optional)
  // saveCourse(formData);
  
  // Navigate\!
  navigate('/next-page');
};
```

---

## ğŸ”„ Complete Architecture

```
User Interaction
      â†“
React Components
      â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                  â”‚
   â–¼                  â–¼
window.Android    Firebase
(On-Device AI)   (Data Storage)
   â”‚                  â”‚
   â–¼                  â–¼
Generate Text      Save/Load
Streaming          Courses
Chat               Progress
```

**Key Points:**
- âœ… AI processing â†’ `window.Android` (on-device)
- âœ… Data storage â†’ Firebase
- âœ… Navigation â†’ Just `navigate('/path')`

---

## ğŸ“ Files Created

I've already created these files in your React project:

1. **`src/firebase/config.js`** - Firebase initialization
2. **`src/firebase/courseService.js`** - Database operations

**You need to:**
1. Run `npm install firebase` in your React project
2. Update `config.js` with your Firebase credentials
3. Import and use the functions in your components

---

## ğŸ§ª Testing Firebase

### Test 1: Check Connection

```jsx
import { db } from './firebase/config';
import { collection, getDocs } from 'firebase/firestore';

async function testFirebase() {
  try {
    const snapshot = await getDocs(collection(db, 'courses'));
    console.log('âœ… Firebase connected\! Courses:', snapshot.size);
  } catch (error) {
    console.error('âŒ Firebase error:', error);
  }
}

testFirebase();
```

### Test 2: Save Test Course

```jsx
import { saveCourse } from './firebase/courseService';

async function testSave() {
  const testCourse = {
    course: "Test Course",
    modules: [
      {
        title: "Test Module",
        lessons: [
          { title: "Test Lesson", summary: "Test", detail: "Test content" }
        ]
      }
    ]
  };
  
  const result = await saveCourse(testCourse);
  console.log('Save result:', result);
}

testSave();
```

---

## ğŸ¯ Quick Setup Commands

```bash
# 1. Navigate to React project
cd /tmp/Code-O-Clock/frontend

# 2. Install Firebase
npm install firebase

# 3. Update config with your credentials
nano src/firebase/config.js

# 4. Rebuild React app
npm run build

# 5. Copy to Android assets
rm -rf /Users/thilak/PythonFiles/Competetions/Hack-Ula/MentoraMobile/app/src/main/assets/mentora/*
cp -r build/* /Users/thilak/PythonFiles/Competetions/Hack-Ula/MentoraMobile/app/src/main/assets/mentora/

# 6. Rebuild Android app
cd /Users/thilak/PythonFiles/Competetions/Hack-Ula/MentoraMobile
./gradlew assembleDebug

# 7. Install on phone
adb install -r app/build/outputs/apk/debug/app-debug.apk
```

---

## ğŸ” Security Notes

**Current setup (Test Mode):**
- âš ï¸ Anyone can read/write data
- âš ï¸ No authentication required
- âœ… Good for development

**For Production:**
1. Enable Firebase Authentication
2. Update security rules
3. Add user login
4. Restrict access to user's own data

---

## ğŸ“Š Firebase Free Tier Limits

âœ… **Firestore:**
- 1 GB storage
- 50,000 reads/day
- 20,000 writes/day
- 20,000 deletes/day

âœ… **Hosting:**
- 10 GB storage
- 360 MB/day transfer

**More than enough for development and testing\!**

---

## ğŸ¯ Summary

### What You Need To Do:

1. âœ… Create Firebase project (5 min)
2. âœ… Get config credentials (1 min)
3. âœ… Enable Firestore (2 min)
4. âœ… Update `config.js` with your credentials (2 min)
5. âœ… Run `npm install firebase` (1 min)
6. âœ… Test and rebuild app (10 min)

**Total time: ~20 minutes**

---

## ğŸš€ Next Steps

1. **Complete Firebase setup** (follow steps above)
2. **Fix navigation** by removing backend API calls
3. **Use `window.Android`** for AI processing
4. **Use Firebase** for data storage
5. **Test** everything works\!

---

## ğŸ“š Resources

- Firebase Console: https://console.firebase.google.com/
- Firebase Docs: https://firebase.google.com/docs/web/setup
- Firestore Docs: https://firebase.google.com/docs/firestore

---

**Firebase files are ready in `/tmp/Code-O-Clock/frontend/src/firebase/`**

**Next: Get your Firebase config and update `config.js`\!** ğŸ‰
