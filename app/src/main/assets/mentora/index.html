<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <link rel="icon" href="./favicon.ico"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="theme-color" content="#000000"/>
    <meta name="description" content="Web site created using create-react-app"/>
    <link rel="apple-touch-icon" href="./logo192.png"/>
    <link rel="manifest" href="./manifest.json"/>
    <title>React App</title>
    <script>
        // Navigation Fix - Complete Mock System
        console.log('[NavigationFix] Initializing complete mock system...');

        // Flag that we're on Android
        window.isAndroidApp = true;

        // Mock response data
        const getMockResponse = (url) => {
            console.log('[NavigationFix] Generating mock for:', url);
            return {
                success: true,
                course_id: 'android-mock-' + Date.now(),
                extracted_text: 'Sample course content extracted on Android device',
                course: {
                    title: 'Sample Course',
                    description: 'Generated on Android',
                    lessons: [
                        { id: 1, title: 'Introduction', content: 'Welcome to the course' }
                    ]
                },
                data: { status: 'success' },
                message: 'Success - Running on Android'
            };
        };

        // Override fetch
        const originalFetch = window.fetch;
        window.fetch = function(url, options) {
            if (url.includes('localhost') || url.includes('/api/') || url.includes('/upload')) {
                console.log('[NavigationFix] Intercepted fetch:', url);
                return Promise.resolve({
                    ok: true,
                    status: 200,
                    statusText: 'OK',
                    headers: new Headers({'Content-Type': 'application/json'}),
                    json: () => Promise.resolve(getMockResponse(url)),
                    text: () => Promise.resolve(JSON.stringify(getMockResponse(url))),
                    clone: function() { return this; }
                });
            }
            return originalFetch.call(this, url, options);
        };

        // Override XMLHttpRequest for axios
        const OriginalXHR = window.XMLHttpRequest;
        window.XMLHttpRequest = function() {
            const xhr = new OriginalXHR();
            const originalOpen = xhr.open;
            const originalSend = xhr.send;
            
            xhr.open = function(method, url, ...args) {
                this._method = method;
                this._url = url;
                
                // Check if this is a localhost/api call
                if (url.includes('localhost') || url.includes('/api/') || url.includes('/upload')) {
                    this._shouldMock = true;
                    console.log('[NavigationFix] Will mock XHR:', method, url);
                }
                
                return originalOpen.call(this, method, url, ...args);
            };
            
            xhr.send = function(data) {
                if (this._shouldMock) {
                    console.log('[NavigationFix] Mocking XHR response for:', this._url);
                    
                    // Simulate async response
                    setTimeout(() => {
                        const mockData = getMockResponse(this._url);
                        const responseText = JSON.stringify(mockData);
                        
                        // Set response properties
                        Object.defineProperty(this, 'readyState', { writable: true, value: 4 });
                        Object.defineProperty(this, 'status', { writable: true, value: 200 });
                        Object.defineProperty(this, 'statusText', { writable: true, value: 'OK' });
                        Object.defineProperty(this, 'response', { writable: true, value: responseText });
                        Object.defineProperty(this, 'responseText', { writable: true, value: responseText });
                        Object.defineProperty(this, 'responseType', { writable: true, value: 'text' });
                        
                        // Create proper response headers
                        const mockHeaders = 'Content-Type: application/json\r\n';
                        this.getAllResponseHeaders = () => mockHeaders;
                        this.getResponseHeader = (name) => {
                            if (name.toLowerCase() === 'content-type') return 'application/json';
                            return null;
                        };
                        
                        console.log('[NavigationFix] Mock response ready:', mockData);
                        
                        // Trigger events
                        if (this.onreadystatechange) {
                            this.onreadystatechange({ target: this });
                        }
                        if (this.onload) {
                            this.onload({ target: this });
                        }
                    }, 200); // Small delay to simulate network
                    
                    return;
                }
                
                return originalSend.call(this, data);
            };
            
            return xhr;
        };

        console.log('[NavigationFix] Complete! All network calls (fetch & axios) will be mocked.');
        console.log('[NavigationFix] You can now navigate through all pages without a backend.');
    </script>
    <script defer="defer" src="./static/js/main.9dbe6570.js"></script>
    <link href="./static/css/main.e6c13ad2.css" rel="stylesheet">
</head>
<body>
<noscript>You need to enable JavaScript to run this app.</noscript>
<div id="root"></div>
</body>
</html>