<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#6366F1">
    <title>Mentora - AI-Powered Learning</title>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        :root {
            --primary: #6366F1;
            --primary-dark: #4F46E5;
            --secondary: #10B981;
            --warning: #F59E0B;
            --danger: #EF4444;
            --dark: #1F2937;
            --light: #F9FAFB;
            --white: #FFFFFF;
            --gray: #6B7280;
            --border: #E5E7EB;
        }
        
        html, body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 
                         'Ubuntu', 'Cantarell', 'Helvetica Neue', sans-serif;
            background: var(--light);
            color: var(--dark);
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            width: 100%;
            height: 100%;
        }
        
        /* ========== APP CONTAINER ========== */
        .app {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            padding-bottom: 80px;
        }
        
        /* ========== HEADER ========== */
        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: var(--white);
            padding: 16px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 10px rgba(99, 102, 241, 0.3);
            position: sticky;
            top: 0;
            z-index: 999;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .logo {
            width: 40px;
            height: 40px;
            background: var(--white);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 26.4px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .app-title {
            font-size: 24.2px;
            font-weight: 700;
            letter-spacing: -0.5px;
        }
        
        .header-actions {
            display: flex;
            gap: 12px;
        }
        
        .icon-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
        }
        
        .icon-btn:active {
            transform: scale(0.95);
            background: rgba(255,255,255,0.3);
        }
        
        /* ========== CONTENT AREA ========== */
        .content {
            flex: 1;
            padding: 20px;
            max-width: 100%;
            overflow-x: hidden;
        }
        
        .page {
            display: none;
            animation: fadeIn 0.4s ease;
        }
        
        .page.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .page-title {
            font-size: 30.8px;
            font-weight: 800;
            margin-bottom: 8px;
            color: var(--dark);
        }
        
        .page-subtitle {
            font-size: 15.4px;
            color: var(--gray);
            margin-bottom: 24px;
        }
        
        /* ========== CARDS ========== */
        .card {
            background: var(--white);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        
        .card:active {
            transform: scale(0.98);
        }
        
        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }
        
        .card-title {
            font-size: 19.8px;
            font-weight: 700;
            color: var(--dark);
        }
        
        .card-badge {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 13.2px;
            font-weight: 600;
        }
        
        .badge-progress {
            background: #DBEAFE;
            color: #1E40AF;
        }
        
        .badge-complete {
            background: #D1FAE5;
            color: #065F46;
        }
        
        .badge-new {
            background: #FEF3C7;
            color: #92400E;
        }
        
        /* ========== FORMS ========== */
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            font-size: 15.4px;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 8px;
        }
        
        .form-input, .form-textarea, .form-select {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid var(--border);
            border-radius: 12px;
            font-size: 17.6px;
            transition: all 0.3s ease;
            background: var(--white);
            color: var(--dark);
        }
        
        .form-input:focus, .form-textarea:focus, .form-select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
        }
        
        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        /* ========== BUTTONS ========== */
        .btn {
            padding: 14px 24px;
            border-radius: 12px;
            font-size: 17.6px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: var(--white);
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
        }
        
        .btn-primary:active {
            transform: scale(0.98);
            box-shadow: 0 2px 8px rgba(99, 102, 241, 0.3);
        }
        
        .btn-secondary {
            background: var(--light);
            color: var(--dark);
            border: 2px solid var(--border);
        }
        
        .btn-secondary:active {
            background: var(--border);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        /* ========== PROGRESS ========== */
        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--border);
            border-radius: 4px;
            overflow: hidden;
            margin: 12px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--secondary) 0%, #059669 100%);
            transition: width 0.3s ease;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin: 16px 0;
        }
        
        .stat-card {
            background: var(--light);
            padding: 16px;
            border-radius: 12px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 26.4px;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 4px;
        }
        
        .stat-label {
            font-size: 13.2px;
            color: var(--gray);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        /* ========== COURSE LIST ========== */
        .course-item {
            background: var(--white);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 12px;
            display: flex;
            gap: 16px;
            align-items: center;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .course-item:active {
            transform: scale(0.98);
        }
        
        .course-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 35.2px;
            flex-shrink: 0;
        }
        
        .course-info {
            flex: 1;
            min-width: 0;
        }
        
        .course-title {
            font-size: 17.6px;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .course-meta {
            font-size: 13.2px;
            color: var(--gray);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        /* ========== BOTTOM NAVIGATION ========== */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--white);
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            padding: 8px 0 calc(8px + env(safe-area-inset-bottom));
            z-index: 1000;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 8px 4px;
            cursor: pointer;
            color: var(--gray);
            transition: all 0.3s ease;
            text-decoration: none;
        }
        
        .nav-item:active {
            transform: scale(0.95);
        }
        
        .nav-item.active {
            color: var(--primary);
        }
        
        .nav-icon {
            font-size: 24.2px;
            margin-bottom: 4px;
            transition: transform 0.3s ease;
        }
        
        .nav-item.active .nav-icon {
            transform: scale(1.1);
        }
        
        .nav-label {
            font-size: 11px;
            font-weight: 600;
            white-space: nowrap;
        }
        
        /* ========== LOADING & EMPTY STATES ========== */
        .loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px;
            text-align: center;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid var(--border);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 16px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 60px 20px;
            text-align: center;
        }
        
        .empty-icon {
            font-size: 70.4px;
            margin-bottom: 16px;
            opacity: 0.5;
        }
        
        .empty-title {
            font-size: 19.8px;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 8px;
        }
        
        .empty-text {
            font-size: 15.4px;
            color: var(--gray);
            line-height: 1.6;
        }
        
        /* ========== RESPONSIVE ========== */
        @media (max-width: 360px) {
            .header {
                padding: 12px 16px;
            }
            
            .app-title {
                font-size: 19.8px;
            }
            
            .logo {
                width: 36px;
                height: 36px;
                font-size: 22px;
            }
            
            .content {
                padding: 16px;
            }
            
            .page-title {
                font-size: 26.4px;
            }
            
            .nav-icon {
                font-size: 22px;
            }
            
            .nav-label {
                font-size: 9.9px;
            }
            
            .bottom-nav {
                grid-template-columns: repeat(6, 1fr);
            }
        }
        
        @media (min-width: 768px) {
            .content {
                max-width: 768px;
                margin: 0 auto;
            }
            
            .stats-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }
        
        /* ========== UTILITIES ========== */
        .mt-1 { margin-top: 8px; }
        .mt-2 { margin-top: 16px; }
        .mt-3 { margin-top: 24px; }
        .mb-1 { margin-bottom: 8px; }
        .mb-2 { margin-bottom: 16px; }
        .mb-3 { margin-bottom: 24px; }
        .text-center { text-align: center; }
        .text-sm { font-size: 15.4px; }
        .text-xs { font-size: 13.2px; }
        .text-gray { color: var(--gray); }
        .font-bold { font-weight: 700; }
        
        /* ========== ENHANCEMENTS ========== */
        /* Splash Screen */
        .splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            animation: fadeOut 0.5s ease 1.5s forwards;
        }
        
        @keyframes fadeOut {
            to {
                opacity: 0;
                pointer-events: none;
            }
        }
        
        .splash-logo {
            width: 120px;
            height: 120px;
            background: white;
            border-radius: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 24px;
            animation: bounceIn 0.8s ease;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        
        @keyframes bounceIn {
            0% {
                transform: scale(0);
                opacity: 0;
            }
            50% {
                transform: scale(1.1);
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        .splash-text {
            color: white;
            font-size: 33px;
            font-weight: 800;
            margin-bottom: 8px;
            animation: fadeInUp 0.8s ease 0.3s both;
        }
        
        .splash-tagline {
            color: rgba(255, 255, 255, 0.8);
            font-size: 16.5px;
            animation: fadeInUp 0.8s ease 0.5s both;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .splash-loader {
            margin-top: 40px;
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        /* Card Hover Effects */
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        /* Button Ripple Effect */
        .btn {
            position: relative;
            overflow: hidden;
        }
        
        .btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .btn:active::after {
            width: 300px;
            height: 300px;
        }
        
        /* Search Bar */
        .search-bar {
            position: relative;
            margin-bottom: 20px;
        }
        
        .search-input {
            width: 100%;
            padding: 14px 48px 14px 16px;
            border: 2px solid var(--border);
            border-radius: 12px;
            font-size: 17.6px;
            transition: all 0.3s ease;
        }
        
        .search-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
        }
        
        .search-icon {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 19.8px;
            color: var(--gray);
        }
        
        /* Completion Badge */
        .completion-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 10px;
            background: #D1FAE5;
            color: #065F46;
            border-radius: 12px;
            font-size: 12.1px;
            font-weight: 600;
        }
        
        /* Toast Notifications */
        .toast {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--dark);
            color: white;
            padding: 14px 24px;
            border-radius: 12px;
            font-size: 15.4px;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            z-index: 10000;
            animation: toastSlideIn 0.3s ease forwards;
        }
        
        @keyframes toastSlideIn {
            to {
                transform: translateX(-50%) translateY(0);
            }
        }
        
        .toast.hiding {
            animation: toastSlideOut 0.3s ease forwards;
        }
        
        @keyframes toastSlideOut {
            to {
                transform: translateX(-50%) translateY(100px);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
<!-- Splash Screen -->
<div class="splash-screen">
    <div class="splash-logo">
        <img src="./logo.svg" alt="Mentora" style="width: 80%; height: 80%; object-fit: contain;">
    </div>
    <div class="splash-text">Mentora</div>
    <div class="splash-tagline">AI-Powered Learning Platform</div>
    <div class="splash-loader"></div>
</div>

<div class="app">
    <!-- Header -->
    <header class="header">
        <div class="logo-container">
            <div class="logo">
                <img src="./logo.svg" alt="Mentora Logo"
                     style="width: 100%; height: 100%; object-fit: contain; padding: 4px;">
            </div>
            <h1 class="app-title">Mentora</h1>
        </div>
        <div class="header-actions">
            <button class="icon-btn" onclick="showNotifications()">üîî</button>
            <button class="icon-btn" onclick="navigateTo('settings')">‚öôÔ∏è</button>
            <button class="icon-btn" onclick="showProfile()">üë§</button>
        </div>
    </header>

    <!-- Content Area -->
    <main class="content">
        <!-- Page: Courses -->
        <div id="page-courses" class="page active">
            <h2 class="page-title">My Courses</h2>
            <p class="page-subtitle">Continue your learning journey</p>

            <div class="search-bar" id="coursesSearchBar" style="display: none;">
                <input type="text" class="search-input" placeholder="Search courses..."
                       id="coursesSearch" oninput="filterCourses(this.value)">
                <span class="search-icon">üîç</span>
            </div>

            <div id="coursesList">
                <div class="empty-state">
                    <div class="empty-icon">üìö</div>
                    <h3 class="empty-title">No courses yet</h3>
                    <p class="empty-text">Generate your first AI-powered course from any
                        website!</p>
                    <button class="btn btn-primary mt-2" onclick="navigateTo('upload')">
                        <span>üì§</span> Generate Course
                    </button>
                </div>
            </div>
        </div>

        <!-- Page: Upload/Generate -->
        <div id="page-upload" class="page">
            <h2 class="page-title">Generate Course</h2>
            <p class="page-subtitle">Create AI-powered courses from any website</p>

            <div class="card">
                <form id="courseForm" onsubmit="generateCourse(event)">
                    <div class="form-group">
                        <label class="form-label">Website URL</label>
                        <input type="url" class="form-input" id="websiteUrl"
                               placeholder="https://example.com/article" required>
                        <p class="text-xs text-gray mt-1">Enter any educational website, blog, or
                            Wikipedia article</p>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Course Title</label>
                        <input type="text" class="form-input" id="courseTitle"
                               placeholder="e.g., Introduction to Machine Learning" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Difficulty Level</label>
                        <select class="form-select" id="difficulty">
                            <option value="Beginner">Beginner</option>
                            <option value="Intermediate">Intermediate</option>
                            <option value="Advanced">Advanced</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Target Audience</label>
                        <input type="text" class="form-input" id="audience"
                               placeholder="e.g., Students, Professionals, Beginners" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Prerequisites</label>
                        <textarea class="form-textarea" id="prerequisites"
                                  placeholder="What knowledge should learners have before starting?"></textarea>
                    </div>

                    <button type="submit" class="btn btn-primary" id="generateBtn">
                        <span>‚ú®</span> Generate Course
                    </button>
                </form>
            </div>

            <div id="generationStatus" class="card" style="display: none;">
                <h3 class="card-title">ü§ñ AI is working...</h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                </div>
                <p class="text-sm text-gray text-center mt-1" id="statusText">Initializing...</p>
            </div>
        </div>

        <!-- Page: Learner Profile -->
        <div id="page-learner" class="page">
            <h2 class="page-title">Learner Profile</h2>
            <p class="page-subtitle">Track your progress and achievements</p>

            <div class="card">
                <div style="text-align: center; margin-bottom: 20px;">
                    <div style="width: 80px; height: 80px; border-radius: 50%; background: linear-gradient(135deg, var(--primary), var(--primary-dark)); display: flex; align-items: center; justify-content: center; font-size: 44px; margin: 0 auto 12px; color: white; font-weight: bold;">
                        A
                    </div>
                    <h3 class="font-bold" style="font-size: 22px;">Anonymous Learner</h3>
                    <p class="text-sm text-gray">Level 1 ‚Ä¢ Beginner</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value">0</div>
                        <div class="stat-label">Courses</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">0</div>
                        <div class="stat-label">Completed</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">0</div>
                        <div class="stat-label">Hours</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">0</div>
                        <div class="stat-label">Streak</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3 class="card-title mb-2">üéØ Learning Goals</h3>
                <div class="empty-state">
                    <p class="empty-text">Set your learning goals to track progress</p>
                    <button class="btn btn-primary mt-2">Set Goals</button>
                </div>
            </div>
        </div>

        <!-- Page: Learning Path -->
        <div id="page-path" class="page">
            <h2 class="page-title">Learning Path</h2>
            <p class="page-subtitle">Your personalized learning journey</p>

            <div class="card">
                <h3 class="card-title mb-2">üéØ Recommended Path</h3>
                <p class="text-sm text-gray mb-3">Based on your interests and goals</p>

                <div class="empty-state">
                    <div class="empty-icon">üó∫Ô∏è</div>
                    <h3 class="empty-title">No learning path yet</h3>
                    <p class="empty-text">Generate courses to build your personalized learning
                        path</p>
                </div>
            </div>

            <div class="card">
                <h3 class="card-title mb-2">üìä Progress Overview</h3>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 0%"></div>
                </div>
                <p class="text-sm text-gray text-center mt-1">0% Complete ‚Ä¢ 0 of 0 milestones
                    reached</p>
            </div>
        </div>

        <!-- Page: Examine -->
        <div id="page-examine" class="page">
            <h2 class="page-title">Examine</h2>
            <p class="page-subtitle">Test your knowledge</p>

            <div class="card">
                <h3 class="card-title mb-2">‚úçÔ∏è Available Quizzes</h3>
                <div class="empty-state">
                    <div class="empty-icon">üìù</div>
                    <h3 class="empty-title">No quizzes available</h3>
                    <p class="empty-text">Complete courses to unlock quizzes and assessments</p>
                </div>
            </div>

            <div class="card">
                <h3 class="card-title mb-2">üèÜ Your Scores</h3>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value">0</div>
                        <div class="stat-label">Taken</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">0%</div>
                        <div class="stat-label">Avg Score</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Page: Outcome -->
        <div id="page-outcome" class="page">
            <h2 class="page-title">Outcomes</h2>
            <p class="page-subtitle">Your learning achievements</p>

            <div class="card">
                <h3 class="card-title mb-2">üìä Overall Progress</h3>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value">0</div>
                        <div class="stat-label">Courses Started</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">0</div>
                        <div class="stat-label">Completed</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">0</div>
                        <div class="stat-label">Certificates</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">0</div>
                        <div class="stat-label">Total Hours</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3 class="card-title mb-2">üèÖ Achievements</h3>
                <div class="empty-state">
                    <div class="empty-icon">üèÜ</div>
                    <h3 class="empty-title">No achievements yet</h3>
                    <p class="empty-text">Complete courses and quizzes to earn achievements</p>
                </div>
            </div>

            <div class="card">
                <h3 class="card-title mb-2">üìà Learning Analytics</h3>
                <p class="text-sm text-gray">Coming soon! Track your learning patterns and
                    insights.</p>
            </div>
        </div>

        <!-- Page: Course Viewer -->
        <div id="page-course-viewer" class="page">
            <button class="btn btn-secondary mb-2" onclick="navigateTo('courses')"
                    style="width: auto; padding: 8px 16px;">
                <span>‚Üê</span> Back to Courses
            </button>

            <div id="courseViewerContent">
                <!-- Course details will be loaded here -->
            </div>
        </div>

        <!-- Page: Lesson Viewer -->
        <div id="page-lesson-viewer" class="page">
            <button class="btn btn-secondary mb-2" onclick="goBackToCourseViewer()"
                    style="width: auto; padding: 8px 16px;">
                <span>‚Üê</span> Back to Course
            </button>

            <div id="lessonViewerContent">
                <!-- Lesson content will be loaded here -->
            </div>
        </div>

        <!-- Page: Settings -->
        <div id="page-settings" class="page">
            <h2 class="page-title">Settings</h2>
            <p class="page-subtitle">AI Model & App Preferences</p>

            <div class="card">
                <h3 class="card-title mb-2">ü§ñ AI Model Status</h3>
                <div id="aiModelStatus" style="margin-bottom:16px;">
                    <!-- Status will be loaded here -->
                </div>
                <button class="btn btn-primary mb-1" id="downloadModelBtn"
                        onclick="downloadAIModel()" style="display:none;">
                    <span>‚¨áÔ∏è</span> Download AI Model
                </button>
                <button class="btn btn-secondary" onclick="navigateTo('courses')">
                    <span>‚Üê</span> Back to Courses
                </button>
            </div>
            <div class="card">
                <h3 class="card-title mb-2">‚ú® AI Tools</h3>
                <p style="color: var(--gray); margin-bottom: 16px; font-size: 15.4px;">
                    Try all 8 AI-powered features: translation, quiz generation, chat assistant,
                    flashcards, and more!
                </p>
                <a href="ai-features.html" style="text-decoration: none;">
                    <button class="btn btn-primary">
                        <span>ü§ñ</span> Open AI Tools
                    </button>
                </a>
            </div>
            <div class="card">
                <h3 class="card-title mb-2">‚öôÔ∏è App Settings</h3>
                <div>
                    <label style="display:flex;align-items:center;gap:10px;">
                        <input type="checkbox" id="mockModeCheckbox" onchange="toggleMockMode()"
                               style="transform:scale(1.3);">
                        <span>Use Mock Data (Override AI)</span>
                    </label>
                </div>
            </div>
        </div>
    </main>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <a class="nav-item active" data-page="courses" onclick="navigateTo('courses')">
            <div class="nav-icon">üìö</div>
            <div class="nav-label">Courses</div>
        </a>
        <a class="nav-item" data-page="upload" onclick="navigateTo('upload')">
            <div class="nav-icon">üì§</div>
            <div class="nav-label">Upload</div>
        </a>
        <a class="nav-item" data-page="learner" onclick="navigateTo('learner')">
            <div class="nav-icon">üë§</div>
            <div class="nav-label">Learner</div>
        </a>
        <a class="nav-item" data-page="path" onclick="navigateTo('path')">
            <div class="nav-icon">üéØ</div>
            <div class="nav-label">Path</div>
        </a>
        <a class="nav-item" data-page="examine" onclick="navigateTo('examine')">
            <div class="nav-icon">‚úçÔ∏è</div>
            <div class="nav-label">Examine</div>
        </a>
        <a class="nav-item" data-page="outcome" onclick="navigateTo('outcome')">
            <div class="nav-icon">üìä</div>
            <div class="nav-label">Outcome</div>
        </a>
    </nav>
</div>

<script>

    // ========== SETTINGS PAGE: AI Model Management ==========
    function loadSettingsPageStatus() {
        // Only proceed if settings page exists
        const statusDiv = document.getElementById('aiModelStatus');
        const downloadBtn = document.getElementById('downloadModelBtn');
        if (!statusDiv) return;

        // Simulate SDK call to check AI model status
        let isAvailable = false;
        let isDownloading = false;
        let progress = 0;

        // Using Android bridge if present
        if (window.Android && window.Android.getRunAnywhereAIStatus) {
            // Try/catch handles case where call fails
            try {
                const status = JSON.parse(window.Android.getRunAnywhereAIStatus());
                isAvailable = status.installed || false;
                isDownloading = status.downloading || false;
                progress = status.progress || 0;

                if (isAvailable) {
                    statusDiv.innerHTML = `<div style="color:green;font-weight:600;">Model installed ‚úÖ</div><div class="completion-badge mt-1">Ready for course generation</div>`;
                    if (downloadBtn) downloadBtn.style.display = 'none';
                } else if (isDownloading) {
                    statusDiv.innerHTML = `<div style="color:orange;font-weight:600;">Model downloading... (${progress}%)</div>
                        <div class="progress-bar"><div class="progress-fill" style="width:${progress}%;background:linear-gradient(90deg,#6366F1 0%,#10B981 100%)"></div></div>
                        <div class="text-xs text-gray mt-1">Please keep the app open until download completes</div>`;
                    if (downloadBtn) downloadBtn.style.display = 'none';
                } else {
                    statusDiv.innerHTML = `<div style="color:red;font-weight:600;">Model not installed ‚ùå</div>
                        <div class="text-xs text-gray mt-1">Download the AI model (~1GB) to enable smart course generation on-device</div>`;
                    if (downloadBtn) downloadBtn.style.display = '';
                }
            } catch(e) {
                statusDiv.innerHTML = `<div style="color:gray;">Unable to read AI model status.</div>`;
                if (downloadBtn) downloadBtn.style.display = '';
            }
        } else {
            // Browser mock
            statusDiv.innerHTML = `<div style="color:gray;font-weight:600;">Mock mode: No AI model detected</div><div class="text-xs text-gray mt-1">Installable AI models are available in the Android app</div>`;
            if (downloadBtn) downloadBtn.style.display = 'none';
        }

        // Set mockModeCheckbox if exists
        const cb = document.getElementById('mockModeCheckbox');
        if (cb) cb.checked = window.useMockData === true;
    }

    // Called when user clicks Download Model
    function downloadAIModel() {
        if (window.Android && window.Android.downloadRunAnywhereModel) {
            showToast("üöÄ Download started!");
            window.Android.downloadRunAnywhereModel();
            // Wait a sec, then reload status
            setTimeout(loadSettingsPageStatus, 1000);
        } else {
            showToast("‚ùå Download only available in Android app");
        }
    }

    // Called when user toggles Use Mock Data
    function toggleMockMode() {
        window.useMockData = !!document.getElementById('mockModeCheckbox').checked;
        localStorage.setItem('useMockData', window.useMockData ? "1" : "");
        showToast(window.useMockData ? "üü£ Mock data enabled" : "üü¢ Mock data disabled");

        // Optionally reload courses in mock mode
        loadCourses();
    }

    // Run AI Model Status every time settings page opens
    function settingsPageWatcher() {
        // Listen for page navigation to settings
        let lastPage = null;
        setInterval(function() {
            const currPage = localStorage.getItem('currentPage');
            if (currPage === 'settings' && currPage !== lastPage) {
                loadSettingsPageStatus();
            }
            lastPage = currPage;
        }, 500);
    }
    settingsPageWatcher();

        // ========== NAVIGATION ==========
        function navigateTo(pageName) {
            console.log('[Navigation] Switching to:', pageName);

            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });

            // Show selected page
            document.getElementById('page-' + pageName).classList.add('active');

            // Update nav active state
            document.querySelectorAll('.nav-item').forEach(item => {
                if (item.dataset.page === pageName) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });

            // Save current page
            localStorage.setItem('currentPage', pageName);

            // If navigating to settings, update the status immediately
            if (pageName === 'settings') {
                loadSettingsPageStatus();
            }

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function goBackToCourseViewer() {
            navigateTo('course-viewer');
        }

        // Restore last page on load
        window.addEventListener('DOMContentLoaded', () => {
            const lastPage = localStorage.getItem('currentPage') || 'courses';
            // Track mock mode from previous session
            window.useMockData = !!localStorage.getItem('useMockData');
            navigateTo(lastPage);
            loadCourses();
            if (lastPage === 'settings') loadSettingsPageStatus();
        });

        // ========== COURSE GENERATION ==========
        async function generateCourse(event) {
            event.preventDefault();

            const url = document.getElementById('websiteUrl').value;
            const title = document.getElementById('courseTitle').value;
            const difficulty = document.getElementById('difficulty').value;
            const audience = document.getElementById('audience').value;
            const prerequisites = document.getElementById('prerequisites').value;

            console.log('[CourseGen] Starting generation...');

            // Show status
            document.getElementById('generationStatus').style.display = 'block';
            document.getElementById('generateBtn').disabled = true;
            updateProgress(10, 'Extracting website content...');

            try {
                // Check if Android bridge is available
                if (window.Android && window.Android.generateCourseContent) {
                    console.log('[CourseGen] Using Android AI generation');

                    updateProgress(30, 'Analyzing content with AI...');

                    // Set up timeout
                    let timeoutId;
                    let completed = false;

                    const timeoutPromise = new Promise((resolve, reject) => {
                        timeoutId = setTimeout(() => {
                            if (!completed) {
                                reject(new Error('AI generation timed out after 30 seconds. The AI model may not be downloaded yet.'));
                            }
                        }, 30000); // 30 second timeout
                    });

                    const generationPromise = new Promise((resolve, reject) => {
                        try {
                            window.Android.generateCourseContent(
                                url,
                                '', // extracted text will be handled by Android
                                title,
                                difficulty,
                                audience,
                                prerequisites,
                                function(response) {
                                    completed = true;
                                    clearTimeout(timeoutId);
                                    console.log('[CourseGen] Response:', response);

                                    if (response.success) {
                                        resolve(response);
                                    } else {
                                        reject(new Error(response.message || response.error || 'Generation failed'));
                                    }
                                }
                            );
                        } catch (err) {
                            completed = true;
                            clearTimeout(timeoutId);
                            reject(err);
                        }
                    });

                    // Race between timeout and generation
                    const response = await Promise.race([generationPromise, timeoutPromise]);

                    updateProgress(100, 'Course generated successfully!');

                    // Save course
                    saveCourse(response.course);

                    // Show success and navigate
                    setTimeout(() => {
                        navigateTo('courses');
                        document.getElementById('courseForm').reset();
                        document.getElementById('generationStatus').style.display = 'none';
                        document.getElementById('generateBtn').disabled = false;
                    }, 500);

                } else {
                    // Fallback for testing without Android
                    console.log('[CourseGen] Using mock generation');
                    updateProgress(50, 'Generating course structure...');

                    setTimeout(() => {
                        const mockCourse = {
                            id: 'course-' + Date.now(),
                            title: title,
                            difficulty: difficulty,
                            audience: audience,
                            prerequisites: prerequisites,
                            icon: 'üìò',
                            progress: 0,
                            modules: [
                                {
                                    id: 'module-1',
                                    title: 'Introduction',
                                    lessons: ['Overview', 'Getting Started']
                                },
                                {
                                    id: 'module-2',
                                    title: 'Core Concepts',
                                    lessons: ['Fundamentals', 'Key Principles']
                                }
                            ]
                        };

                        updateProgress(100, 'Course generated!');
                        saveCourse(mockCourse);

                        setTimeout(() => {
                            alert('‚úÖ Course generated successfully!');
                            navigateTo('courses');
                            document.getElementById('courseForm').reset();
                            document.getElementById('generationStatus').style.display = 'none';
                            document.getElementById('generateBtn').disabled = false;
                        }, 1000);
                    }, 2000);
                }
            } catch (error) {
                console.error('[CourseGen] Error:', error);

                // Check if it's a timeout error
                if (error.message && error.message.includes('timed out')) {
                    // Use mock data instead
                    console.log('[CourseGen] Timeout - using mock data');
                    updateProgress(80, 'Using mock data...');

                    const mockCourse = {
                        id: 'course-' + Date.now(),
                        title: title,
                        difficulty: difficulty,
                        audience: audience,
                        prerequisites: prerequisites,
                        icon: 'üìò',
                        progress: 0,
                        modules: [
                            {
                                id: 'module-1',
                                title: 'Introduction to ' + title,
                                lessons: ['Overview', 'Getting Started', 'Key Concepts']
                            },
                            {
                                id: 'module-2',
                                title: 'Core Concepts',
                                lessons: ['Fundamentals', 'Best Practices', 'Advanced Topics']
                            },
                            {
                                id: 'module-3',
                                title: 'Practical Application',
                                lessons: ['Hands-on Examples', 'Projects', 'Summary']
                            }
                        ]
                    };

                    updateProgress(100, 'Course generated with mock data!');
                    saveCourse(mockCourse);

                    setTimeout(() => {
                        navigateTo('courses');
                        document.getElementById('courseForm').reset();
                        document.getElementById('generationStatus').style.display = 'none';
                        document.getElementById('generateBtn').disabled = false;
                    }, 500);
                } else {
                    // Show error
                    alert('‚ùå Failed to generate course: ' + error.message);
                    document.getElementById('generationStatus').style.display = 'none';
                    document.getElementById('generateBtn').disabled = false;
                }
            }
        }

        function updateProgress(percent, text) {
            document.getElementById('progressFill').style.width = percent + '%';
            document.getElementById('statusText').textContent = text;
        }

        // ========== COURSE MANAGEMENT ==========
        function saveCourse(course) {
            let courses = JSON.parse(localStorage.getItem('courses') || '[]');
            courses.unshift(course);
            localStorage.setItem('courses', JSON.stringify(courses));
            loadCourses();
        }

        function loadCourses() {
            const courses = JSON.parse(localStorage.getItem('courses') || '[]');
            const coursesList = document.getElementById('coursesList');
            const searchBar = document.getElementById('coursesSearchBar');

            if (courses.length === 0) {
                coursesList.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">üìö</div>
                        <h3 class="empty-title">No courses yet</h3>
                        <p class="empty-text">Generate your first AI-powered course from any website!</p>
                        <button class="btn btn-primary mt-2" onclick="navigateTo('upload')">
                            <span>üì§</span> Generate Course
                        </button>
                    </div>
                `;
                if (searchBar) searchBar.style.display = 'none';
                return;
            }

            // Show search bar if there are courses
            if (searchBar) searchBar.style.display = 'block';

            coursesList.innerHTML = courses.map(course => `
                <div class="course-item" onclick="viewCourse('${course.id}')">
                    <div class="course-icon" style="background: linear-gradient(135deg, #6366F1 0%, #4F46E5 100%); color: white;">
                        ${course.icon || 'üìò'}
                    </div>
                    <div class="course-info">
                        <div class="course-title">${course.title}</div>
                        <div class="course-meta">
                            <span>üìä ${course.difficulty || 'Beginner'}</span>
                            <span>‚è±Ô∏è ${course.modules ? course.modules.length : 0} modules</span>
                        </div>
                        <div class="progress-bar" style="margin-top: 8px;">
                            <div class="progress-fill" style="width: ${course.progress || 0}%"></div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function viewCourse(courseId) {
            const courses = JSON.parse(localStorage.getItem('courses') || '[]');
            const course = courses.find(c => c.id === courseId);

            if (!course) {
                alert('Course not found');
                return;
            }

            // Build course viewer HTML
            let html = `
                <div class="card">
                    <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 20px;">
                        <div style="width: 80px; height: 80px; border-radius: 16px; background: linear-gradient(135deg, #6366F1 0%, #4F46E5 100%); display: flex; align-items: center; justify-content: center; font-size: 44px; color: white;">
                            ${course.icon || 'üìò'}
                        </div>
                        <div style="flex: 1;">
                            <h2 style="font-size: 26.4px; font-weight: 800; margin-bottom: 8px;">${course.title}</h2>
                            <div style="display: flex; gap: 12px; flex-wrap: wrap;">
                                <span style="padding: 4px 12px; background: #DBEAFE; color: #1E40AF; border-radius: 8px; font-size: 13.2px; font-weight: 600;">
                                    üìä ${course.difficulty || 'Beginner'}
                                </span>
                                <span style="padding: 4px 12px; background: #D1FAE5; color: #065F46; border-radius: 8px; font-size: 13.2px; font-weight: 600;">
                                    üë• ${course.audience || 'General'}
                                </span>
                            </div>
                        </div>
                    </div>

                    <div class="progress-bar" style="margin: 16px 0;">
                        <div class="progress-fill" style="width: ${course.progress || 0}%"></div>
                    </div>
                    <p style="text-align: center; font-size: 15.4px; color: var(--gray);">${course.progress || 0}% Complete</p>
                </div>

                ${course.prerequisites ? `
                <div class="card">
                    <h3 class="card-title">üìã Prerequisites</h3>
                    <p style="color: var(--gray); line-height: 1.6;">${course.prerequisites}</p>
                </div>
                ` : ''}
            `;

            // Add modules
            if (course.modules && course.modules.length > 0) {
                html += `<h3 style="font-size: 22px; font-weight: 700; margin: 24px 0 16px;">üìö Course Modules</h3>`;

                course.modules.forEach((module, index) => {
                    html += `
                        <div class="card">
                            <div class="card-header">
                                <h4 class="card-title">${index + 1}. ${module.title}</h4>
                                <span class="card-badge badge-progress">${module.lessons ? module.lessons.length : 0} lessons</span>
                            </div>
                            ${module.description ? `<p style="color: var(--gray); margin-bottom: 12px; font-size: 15.4px;">${module.description}</p>` : ''}

                            ${module.lessons && module.lessons.length > 0 ? `
                                <div style="margin-top: 12px;">
                                    ${module.lessons.map((lesson, lIndex) => `
                                        <div style="padding: 12px; background: var(--light); border-radius: 8px; margin-bottom: 8px; display: flex; align-items: center; justify-content: space-between; cursor: pointer; transition: all 0.2s ease;" onclick="viewLesson('${typeof lesson === 'string' ? lesson : lesson.title}', '${courseId}')" onmouseover="this.style.background='#E5E7EB'" onmouseout="this.style.background='var(--light)'">
                                            <div style="display: flex; align-items: center; gap: 12px;">
                                                <div style="width: 32px; height: 32px; border-radius: 50%; background: var(--white); display: flex; align-items: center; justify-content: center; font-size: 15.4px; font-weight: 700; color: var(--primary);">
                                                    ${lIndex + 1}
                                                </div>
                                                <span style="font-size: 15.4px; font-weight: 600; color: var(--dark);">${typeof lesson === 'string' ? lesson : lesson.title}</span>
                                            </div>
                                            <span style="font-size: 13.2px; color: var(--gray);">20 min</span>
                                        </div>
                                    `).join('')}
                                </div>
                            ` : ''}
                        </div>
                    `;
                });
            }

            html += `
                <div class="card" style="text-align: center;">
                    <h3 class="card-title mb-2">üéØ Ready to Start?</h3>
                    <p style="color: var(--gray); margin-bottom: 16px;">Begin your learning journey with this course</p>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                        <button class="btn btn-secondary" onclick="goBackToCourseViewer()">
                            <span>üìö</span> Back to Courses
                        </button>
                        <button class="btn btn-primary" onclick="goBackToCourseViewer()">
                            <span>‚Üí</span> Next Lesson
                        </button>
                    </div>
                </div>
            `;

            document.getElementById('courseViewerContent').innerHTML = html;
            navigateTo('course-viewer');
        }

                function viewLesson(lessonTitle, courseId) {
            const courses = JSON.parse(localStorage.getItem('courses') || '[]');
            const course = courses.find(c => c.id === courseId);

            // Generate ENHANCED, comprehensive lesson content with 12X more detail
            let html = `
                <div class="card">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 20px;">
                        <div style="width: 60px; height: 60px; border-radius: 50%; background: linear-gradient(135deg, #6366F1 0%, #4F46E5 100%); display: flex; align-items: center; justify-content: center; font-size: 30px; color: white;">
                            üìñ
                        </div>
                        <div style="flex: 1;">
                            <h2 style="font-size: 24.2px; font-weight: 800; margin-bottom: 4px;">${lessonTitle}</h2>
                            <p style="font-size: 15.4px; color: var(--gray);">‚è±Ô∏è 25-30 minutes ‚Ä¢ ${course ? course.difficulty : 'Beginner'} Level ‚Ä¢ Comprehensive Guide</p>
                        </div>
                    </div>
                    
                    <div style="background: linear-gradient(135deg, #EEF2FF 0%, #E0E7FF 100%); padding: 16px; border-radius: 12px; border-left: 4px solid var(--primary);">
                        <p style="color: var(--dark); font-size: 16px; line-height: 1.6; margin: 0;">
                            <strong>üìå Lesson Overview:</strong> This comprehensive, in-depth lesson covers ${lessonTitle} from fundamentals to advanced applications. You'll gain practical skills through examples, exercises, and expert insights.
                        </p>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title" style="margin-bottom: 16px;">üéØ What You'll Master</h3>
                    <p style="color: var(--gray); margin-bottom: 16px; font-size: 15px;">By completing this lesson, you will achieve the following learning outcomes:</p>
                    <ul style="color: var(--dark); line-height: 2; padding-left: 24px;">
                        <li style="margin-bottom: 12px;">‚úÖ <strong>Deep Understanding:</strong> Grasp the core principles, history, and context of ${lessonTitle}</li>
                        <li style="margin-bottom: 12px;">‚úÖ <strong>Practical Skills:</strong> Apply concepts to real-world scenarios with confidence</li>
                        <li style="margin-bottom: 12px;">‚úÖ <strong>Problem-Solving:</strong> Analyze challenges and develop effective solutions</li>
                        <li style="margin-bottom: 12px;">‚úÖ <strong>Best Practices:</strong> Learn professional techniques used by experts</li>
                        <li style="margin-bottom: 12px;">‚úÖ <strong>Avoid Pitfalls:</strong> Recognize and prevent common mistakes</li>
                        <li style="margin-bottom: 0;">‚úÖ <strong>Hands-On Experience:</strong> Complete practical exercises to reinforce learning</li>
                    </ul>
                </div>

                <div class="card">
                    <h3 class="card-title" style="margin-bottom: 16px;">üìö Comprehensive Introduction</h3>
                    <p style="color: var(--dark); line-height: 1.8; margin-bottom: 16px; font-size: 15.5px;">
                        Welcome to this in-depth exploration of <strong>${lessonTitle}</strong>. This topic represents a fundamental pillar in ${course ? course.title : 'this field'}, and developing expertise here will significantly enhance your capabilities across multiple domains. Whether you're a beginner seeking foundational knowledge or an intermediate learner looking to deepen your understanding, this lesson provides comprehensive coverage tailored to your needs.
                    </p>
                    <p style="color: var(--dark); line-height: 1.8; margin-bottom: 16px; font-size: 15.5px;">
                        Throughout history, ${lessonTitle} has evolved from simple concepts into sophisticated frameworks used by professionals worldwide. Understanding this evolution provides valuable context for why certain approaches are preferred today and how they might continue to develop. The principles you'll learn aren't just theoretical‚Äîthey're battle-tested methods refined through countless real-world applications.
                    </p>
                    <p style="color: var(--dark); line-height: 1.8; margin-bottom: 16px; font-size: 15.5px;">
                        This lesson adopts a practical, example-driven approach. You'll see how ${lessonTitle} applies in various contexts, from professional environments to personal projects. Each concept is explained clearly, supported with examples, and reinforced through exercises. By lesson's end, you'll have both the knowledge and confidence to apply these principles independently.
                    </p>
                    <div style="background: #FEF3C7; padding: 14px; border-radius: 8px; border-left: 3px solid #F59E0B; margin-top: 16px;">
                        <p style="margin: 0; color: #92400E; font-size: 14.5px; line-height: 1.7;">
                            üí° <strong>Study Tip:</strong> Take notes as you progress, pause to reflect on how concepts relate to your experience, and don't hesitate to revisit sections. Learning is most effective when you actively engage with the material rather than passively reading.
                        </p>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title" style="margin-bottom: 16px;">üîç Deep Dive: Understanding ${lessonTitle}</h3>
                    
                    <h4 style="font-size: 18px; font-weight: 700; color: var(--primary); margin: 0 0 12px;">Core Definition</h4>
                    <p style="color: var(--dark); line-height: 1.8; margin-bottom: 20px; font-size: 15.5px;">
                        <strong>${lessonTitle}</strong> encompasses a set of principles, methodologies, and practices designed to address specific challenges within ${course ? course.title : 'this domain'}. At its essence, it provides a structured framework for understanding complex systems, making informed decisions, and achieving desired outcomes through systematic approaches.
                    </p>
                    
                    <h4 style="font-size: 18px; font-weight: 700; color: var(--primary); margin: 20px 0 12px;">Historical Development</h4>
                    <p style="color: var(--dark); line-height: 1.8; margin-bottom: 20px; font-size: 15.5px;">
                        The concept of ${lessonTitle} has undergone significant evolution. Early practitioners developed basic frameworks through trial and error, gradually refining their approaches based on what worked in practice. Over time, research validated these methods, leading to standardized practices we use today. Modern applications have further enhanced these foundations with technological advances and new insights from adjacent fields.
                    </p>
                    
                    <div style="background: var(--light); padding: 18px; border-radius: 12px; margin-top: 20px;">
                        <h5 style="font-size: 16px; font-weight: 700; color: var(--dark); margin-bottom: 14px;">üéØ Defining Characteristics</h5>
                        <div style="display: grid; gap: 12px;">
                            <div style="padding: 12px; background: white; border-radius: 8px; border-left: 3px solid #6366F1;">
                                <strong style="color: var(--primary);">Systematic:</strong> Follows logical, repeatable processes
                            </div>
                            <div style="padding: 12px; background: white; border-radius: 8px; border-left: 3px solid #10B981;">
                                <strong style="color: #10B981;">Evidence-Based:</strong> Grounded in research and proven results
                            </div>
                            <div style="padding: 12px; background: white; border-radius: 8px; border-left: 3px solid #F59E0B;">
                                <strong style="color: #F59E0B;">Flexible:</strong> Adapts to different contexts and requirements
                            </div>
                            <div style="padding: 12px; background: white; border-radius: 8px; border-left: 3px solid #8B5CF6;">
                                <strong style="color: #8B5CF6;">Scalable:</strong> Effective at multiple complexity levels
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title" style="margin-bottom: 16px;">üß© Three Foundational Principles</h3>
                    <p style="color: var(--dark); line-height: 1.8; margin-bottom: 20px; font-size: 15px;">
                        Mastering ${lessonTitle} requires understanding these three core principles that underpin all advanced concepts:
                    </p>
                    
                    <div style="background: linear-gradient(135deg, #EEF2FF 0%, #E0E7FF 100%); padding: 18px; border-radius: 12px; margin-bottom: 16px; border-left: 4px solid #6366F1;">
                        <h4 style="font-size: 18px; font-weight: 700; color: #4F46E5; margin-bottom: 12px;">1Ô∏è‚É£ First Principle: Foundation & Structure</h4>
                        <p style="color: var(--dark); line-height: 1.8; margin-bottom: 12px; font-size: 15px;">
                            This principle establishes that effective implementation requires thorough understanding of underlying mechanisms. You cannot skip fundamentals and expect mastery‚Äîsolid foundations enable all advanced work. Think of it like building architecture: without strong foundations, the structure becomes unstable.
                        </p>
                        <p style="color: var(--dark); line-height: 1.8; margin: 0; font-size: 14.5px;">
                            <strong>üí° Practical Implication:</strong> Always invest time in understanding "why" before "how." This knowledge allows you to adapt techniques to new situations and troubleshoot effectively when issues arise.
                        </p>
                    </div>
                    
                    <div style="background: linear-gradient(135deg, #D1FAE5 0%, #A7F3D0 100%); padding: 18px; border-radius: 12px; margin-bottom: 16px; border-left: 4px solid #10B981;">
                        <h4 style="font-size: 18px; font-weight: 700; color: #065F46; margin-bottom: 12px;">2Ô∏è‚É£ Second Principle: Systematic Application</h4>
                        <p style="color: var(--dark); line-height: 1.8; margin-bottom: 12px; font-size: 15px;">
                            Success comes from following proven processes and best practices. Random attempts rarely yield optimal results. This principle emphasizes structured approaches: plan, implement, test, refine. Each step builds on previous ones, creating reliable pathways to desired outcomes.
                        </p>
                        <p style="color: var(--dark); line-height: 1.8; margin: 0; font-size: 14.5px;">
                            <strong>üí° Practical Implication:</strong> Document your process, measure results, and iterate based on feedback. Systematic approaches make success repeatable rather than accidental.
                        </p>
                    </div>
                    
                    <div style="background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%); padding: 18px; border-radius: 12px; border-left: 4px solid #F59E0B;">
                        <h4 style="font-size: 18px; font-weight: 700; color: #92400E; margin-bottom: 12px;">3Ô∏è‚É£ Third Principle: Continuous Improvement</h4>
                        <p style="color: var(--dark); line-height: 1.8; margin-bottom: 12px; font-size: 15px;">
                            Mastery is a journey, not a destination. This principle recognizes that initial implementations can always be enhanced. The field evolves, new techniques emerge, and your understanding deepens with experience. Embrace this iterative nature‚Äîeach cycle of application teaches valuable lessons.
                        </p>
                        <p style="color: var(--dark); line-height: 1.8; margin: 0; font-size: 14.5px;">
                            <strong>üí° Practical Implication:</strong> Regularly review your work, seek feedback from others, stay current with developments, and always look for opportunities to refine your approach.
                        </p>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title" style="margin-bottom: 16px;">üíº Real-World Applications & Case Studies</h3>
                    <p style="color: var(--dark); line-height: 1.8; margin-bottom: 20px; font-size: 15px;">
                        Theory becomes meaningful when you see it in action. Here are three detailed examples showing how ${lessonTitle} solves real problems:
                    </p>
                    
                    <div style="background: white; border: 2px solid #E5E7EB; padding: 18px; border-radius: 12px; margin-bottom: 16px;">
                        <div style="background: linear-gradient(135deg, #6366F1 0%, #4F46E5 100%); color: white; padding: 10px 14px; border-radius: 8px; display: inline-block; margin-bottom: 12px; font-weight: 700;">
                            üìå Case Study #1: Professional Environment
                        </div>
                        <p style="color: var(--dark); line-height: 1.8; margin-bottom: 12px; font-size: 15px;">
                            <strong>Scenario:</strong> A team faces a complex project requiring coordination across multiple departments. They apply ${lessonTitle} by first breaking the project into manageable components, establishing clear communication channels, defining success metrics, and implementing regular review cycles.
                        </p>
                        <p style="color: var(--dark); line-height: 1.8; margin-bottom: 14px; font-size: 15px;">
                            <strong>Outcome:</strong> The systematic approach reduces confusion, improves collaboration, and delivers results on schedule. Team members report better understanding of their roles and how their work contributes to overall success.
                        </p>
                        <div style="background: #F0F9FF; padding: 12px; border-radius: 8px; border-left: 3px solid #3B82F6;">
                            <p style="margin: 0; color: var(--dark); font-size: 14.5px; line-height: 1.7;">
                                <strong>üéì Key Lesson:</strong> Breaking complexity into structured components makes large challenges manageable. Clear processes prevent miscommunication and wasted effort.
                            </p>
                        </div>
                    </div>
                    
                    <div style="background: white; border: 2px solid #E5E7EB; padding: 18px; border-radius: 12px; margin-bottom: 16px;">
                        <div style="background: linear-gradient(135deg, #10B981 0%, #059669 100%); color: white; padding: 10px 14px; border-radius: 8px; display: inline-block; margin-bottom: 12px; font-weight: 700;">
                            üìå Case Study #2: Educational Setting
                        </div>
                        <p style="color: var(--dark); line-height: 1.8; margin-bottom: 12px; font-size: 15px;">
                            <strong>Scenario:</strong> Students struggle with retaining complex information. An educator applies ${lessonTitle} principles by structuring lessons around active learning, spaced repetition, practical applications, and immediate feedback.
                        </p>
                        <p style="color: var(--dark); line-height: 1.8; margin-bottom: 14px; font-size: 15px;">
                            <strong>Outcome:</strong> Student comprehension improves dramatically. The structured approach helps them build knowledge progressively, connect concepts, and apply learning in new contexts.
                        </p>
                        <div style="background: #D1FAE5; padding: 12px; border-radius: 8px; border-left: 3px solid #10B981;">
                            <p style="margin: 0; color: var(--dark); font-size: 14.5px; line-height: 1.7;">
                                <strong>üéì Key Lesson:</strong> Active engagement beats passive consumption. Structure and reinforcement transform information into lasting knowledge.
                            </p>
                        </div>
                    </div>
                    
                    <div style="background: white; border: 2px solid #E5E7EB; padding: 18px; border-radius: 12px;">
                        <div style="background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%); color: white; padding: 10px 14px; border-radius: 8px; display: inline-block; margin-bottom: 12px; font-weight: 700;">
                            üìå Case Study #3: Personal Development
                        </div>
                        <p style="color: var(--dark); line-height: 1.8; margin-bottom: 12px; font-size: 15px;">
                            <strong>Scenario:</strong> An individual wants to master a new skill but struggles with where to start. They apply ${lessonTitle} by setting clear goals, creating a learning schedule, finding quality resources, practicing deliberately, and tracking progress.
                        </p>
                        <p style="color: var(--dark); line-height: 1.8; margin-bottom: 14px; font-size: 15px;">
                            <strong>Outcome:</strong> Within months, they achieve competency that typically takes years. The structured approach prevents overwhelm and maintains motivation through visible progress.
                        </p>
                        <div style="background: #FEF3C7; padding: 12px; border-radius: 8px; border-left: 3px solid #F59E0B;">
                            <p style="margin: 0; color: var(--dark); font-size: 14.5px; line-height: 1.7;">
                                <strong>üéì Key Lesson:</strong> Consistency and structure beat sporadic intense effort. Small, regular progress compounds into major achievements.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title" style="margin-bottom: 16px;">‚öôÔ∏è Implementation Guide: Step-by-Step</h3>
                    <p style="color: var(--dark); line-height: 1.8; margin-bottom: 20px; font-size: 15px;">
                        Ready to apply ${lessonTitle}? Follow this proven four-phase approach:
                    </p>
                    
                    <div style="margin-bottom: 20px;">
                        <div style="display: flex; gap: 16px; margin-bottom: 20px;">
                            <div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #6366F1, #4F46E5); color: white; display: flex; align-items: center; justify-content: center; font-weight: 800; font-size: 22px; flex-shrink: 0;">
                                1
                            </div>
                            <div style="flex: 1;">
                                <h4 style="font-size: 17px; font-weight: 700; color: var(--dark); margin-bottom: 10px;">
                                    Phase 1: Preparation & Analysis
                                </h4>
                                <p style="color: var(--dark); line-height: 1.8; margin-bottom: 10px; font-size: 15px;">
                                    Begin by thoroughly understanding your situation. Gather relevant information, identify stakeholders, define clear objectives, and recognize constraints. Research best practices and learn from others who've faced similar challenges.
                                </p>
                                <div style="background: #EEF2FF; padding: 10px; border-radius: 6px;">
                                    <p style="margin: 0; color: var(--dark); font-size: 14px;">
                                        <strong>Time Investment:</strong> 20-30% of total project duration ‚Ä¢ <strong>Output:</strong> Clear problem definition, resource inventory, success criteria
                                    </p>
                                </div>
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 16px; margin-bottom: 20px;">
                            <div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #10B981, #059669); color: white; display: flex; align-items: center; justify-content: center; font-weight: 800; font-size: 22px; flex-shrink: 0;">
                                2
                            </div>
                            <div style="flex: 1;">
                                <h4 style="font-size: 17px; font-weight: 700; color: var(--dark); margin-bottom: 10px;">
                                    Phase 2: Design & Planning
                                </h4>
                                <p style="color: var(--dark); line-height: 1.8; margin-bottom: 10px; font-size: 15px;">
                                    Develop your approach based on analysis. Create detailed plans, identify potential risks, establish fallback options, and define milestones. Ensure your design addresses core requirements while remaining flexible enough to adapt.
                                </p>
                                <div style="background: #D1FAE5; padding: 10px; border-radius: 6px;">
                                    <p style="margin: 0; color: var(--dark); font-size: 14px;">
                                        <strong>Time Investment:</strong> 15-25% of total project duration ‚Ä¢ <strong>Output:</strong> Detailed roadmap, risk mitigation strategies, resource allocation
                                    </p>
                                </div>
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 16px; margin-bottom: 20px;">
                            <div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #F59E0B, #D97706); color: white; display: flex; align-items: center; justify-content: center; font-weight: 800; font-size: 22px; flex-shrink: 0;">
                                3
                            </div>
                            <div style="flex: 1;">
                                <h4 style="font-size: 17px; font-weight: 700; color: var(--dark); margin-bottom: 10px;">
                                    Phase 3: Execution & Monitoring
                                </h4>
                                <p style="color: var(--dark); line-height: 1.8; margin-bottom: 10px; font-size: 15px;">
                                    Implement your plan systematically. Start with core functionality, test thoroughly, gather feedback continuously, and adjust as needed. Track progress against milestones and document lessons learned along the way.
                                </p>
                                <div style="background: #FEF3C7; padding: 10px; border-radius: 6px;">
                                    <p style="margin: 0; color: var(--dark); font-size: 14px;">
                                        <strong>Time Investment:</strong> 40-50% of total project duration ‚Ä¢ <strong>Output:</strong> Working solution, performance data, feedback collection
                                    </p>
                                </div>
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 16px;">
                            <div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #8B5CF6, #7C3AED); color: white; display: flex; align-items: center; justify-content: center; font-weight: 800; font-size: 22px; flex-shrink: 0;">
                                4
                            </div>
                            <div style="flex: 1;">
                                <h4 style="font-size: 17px; font-weight: 700; color: var(--dark); margin-bottom: 10px;">
                                    Phase 4: Review & Optimization
                                </h4>
                                <p style="color: var(--dark); line-height: 1.8; margin-bottom: 10px; font-size: 15px;">
                                    Evaluate results against objectives. Identify what worked well and what could improve. Implement refinements, optimize performance, and document best practices for future reference. Plan next iteration based on insights gained.
                                </p>
                                <div style="background: #F3E8FF; padding: 10px; border-radius: 6px;">
                                    <p style="margin: 0; color: var(--dark); font-size: 14px;">
                                        <strong>Time Investment:</strong> 10-15% of total project duration ‚Ä¢ <strong>Output:</strong> Performance analysis, optimization recommendations, knowledge documentation
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title" style="margin-bottom: 16px;">üí° Professional Best Practices</h3>
                    <p style="color: var(--dark); line-height: 1.8; margin-bottom: 20px; font-size: 15px;">
                        Accelerate your mastery with these expert-level practices:
                    </p>
                    
                    <div style="display: grid; gap: 12px;">
                        <div style="background: linear-gradient(to right, #EEF2FF, #E0E7FF); padding: 16px; border-radius: 10px; border-left: 4px solid #6366F1;">
                            <h4 style="font-size: 16px; font-weight: 700; color: #4F46E5; margin-bottom: 8px;">‚ú® Practice Deliberate Learning</h4>
                            <p style="margin: 0; color: var(--dark); line-height: 1.7; font-size: 14.5px;">
                                Focus on challenging areas rather than comfortable ones. Set specific learning goals for each session. Regular, focused practice outperforms occasional marathons. Track progress to maintain motivation and identify patterns.
                            </p>
                        </div>
                        
                        <div style="background: linear-gradient(to right, #D1FAE5, #A7F3D0); padding: 16px; border-radius: 10px; border-left: 4px solid #10B981;">
                            <h4 style="font-size: 16px; font-weight: 700; color: #065F46; margin-bottom: 8px;">‚ú® Build a Feedback Loop</h4>
                            <p style="margin: 0; color: var(--dark); line-height: 1.7; font-size: 14.5px;">
                                Seek input from experienced practitioners regularly. Early feedback prevents wasted effort on wrong approaches. Create mechanisms for continuous feedback rather than waiting for completion. Be open to criticism‚Äîit accelerates growth.
                            </p>
                        </div>
                        
                        <div style="background: linear-gradient(to right, #FEF3C7, #FDE68A); padding: 16px; border-radius: 10px; border-left: 4px solid #F59E0B;">
                            <h4 style="font-size: 16px; font-weight: 700; color: #92400E; margin-bottom: 8px;">‚ú® Document Your Journey</h4>
                            <p style="margin: 0; color: var(--dark); line-height: 1.7; font-size: 14.5px;">
                                Maintain detailed notes on techniques that work, challenges faced, and solutions discovered. This creates a personal knowledge base you can reference later. Documentation also reinforces learning through the act of writing and organizing thoughts.
                            </p>
                        </div>
                        
                        <div style="background: linear-gradient(to right, #FCE7F3, #FBCFE8); padding: 16px; border-radius: 10px; border-left: 4px solid #EC4899;">
                            <h4 style="font-size: 16px; font-weight: 700; color: #9F1239; margin-bottom: 8px;">‚ú® Embrace Productive Failure</h4>
                            <p style="margin: 0; color: var(--dark); line-height: 1.7; font-size: 14.5px;">
                                Mistakes provide valuable learning opportunities when analyzed properly. Don't fear failure‚Äîfear not learning from it. Document what went wrong, why, and how to prevent recurrence. Many breakthroughs come from understanding failures.
                            </p>
                        </div>
                        
                        <div style="background: linear-gradient(to right, #DBEAFE, #BFDBFE); padding: 16px; border-radius: 10px; border-left: 4px solid #3B82F6;">
                            <h4 style="font-size: 16px; font-weight: 700; color: #1E40AF; margin-bottom: 8px;">‚ú® Stay Continuously Updated</h4>
                            <p style="margin: 0; color: var(--dark); line-height: 1.7; font-size: 14.5px;">
                                Fields evolve rapidly. Follow industry leaders, read recent publications, attend webinars, and participate in professional communities. Dedicate time weekly to learning about new developments. What works today may become outdated tomorrow.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title" style="margin-bottom: 16px;">üöß Common Pitfalls & Prevention Strategies</h3>
                    <p style="color: var(--dark); line-height: 1.8; margin-bottom: 20px; font-size: 15px;">
                        Learn from others' mistakes\! These pitfalls trip up even experienced practitioners:
                    </p>
                    
                    <div style="background: #FEF2F2; border: 2px solid #F87171; padding: 18px; border-radius: 12px; margin-bottom: 16px;">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                            <div style="width: 36px; height: 36px; border-radius: 50%; background: #DC2626; color: white; display: flex; align-items: center; justify-content: center; font-size: 20px;">‚ö†Ô∏è</div>
                            <h4 style="font-size: 17px; font-weight: 700; color: #991B1B; margin: 0;">
                                Pitfall #1: Skipping Fundamentals for Advanced Topics
                            </h4>
                        </div>
                        <p style="color: var(--dark); line-height: 1.8; margin-bottom: 12px; font-size: 15px;">
                            <strong>The Problem:</strong> Rushing into complex concepts without solid foundational understanding creates knowledge gaps. You might implement solutions without understanding why they work, making troubleshooting nearly impossible.
                        </p>
                        <div style="background: white; padding: 14px; border-radius: 8px; border-left: 3px solid #10B981;">
                            <p style="margin: 0; color: var(--dark); line-height: 1.7; font-size: 14.5px;">
                                <strong>‚úÖ Prevention Strategy:</strong> Resist the urge to skip ahead. Master each level before advancing. Fundamentals aren't boring‚Äîthey're the foundation for everything advanced. Invest time here; it pays dividends later when complex topics build naturally on solid basics.
                            </p>
                        </div>
                    </div>
                    
                    <div style="background: #FEF2F2; border: 2px solid #F87171; padding: 18px; border-radius: 12px; margin-bottom: 16px;">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                            <div style="width: 36px; height: 36px; border-radius: 50%; background: #DC2626; color: white; display: flex; align-items: center; justify-content: center; font-size: 20px;">‚ö†Ô∏è</div>
                            <h4 style="font-size: 17px; font-weight: 700; color: #991B1B; margin: 0;">
                                Pitfall #2: Overengineering Solutions
                            </h4>
                        </div>
                        <p style="color: var(--dark); line-height: 1.8; margin-bottom: 12px; font-size: 15px;">
                            <strong>The Problem:</strong> Adding unnecessary complexity makes solutions harder to understand, maintain, debug, and explain. Complex doesn't equal better‚Äîit often equals fragile and confusing.
                        </p>
                        <div style="background: white; padding: 14px; border-radius: 8px; border-left: 3px solid #10B981;">
                            <p style="margin: 0; color: var(--dark); line-height: 1.7; font-size: 14.5px;">
                                <strong>‚úÖ Prevention Strategy:</strong> Start with the simplest approach that meets requirements. Add complexity only when clearly justified by specific needs. Ask: "Is this complexity necessary?" Often, elegant solutions are simple ones. Simplicity aids understanding, maintenance, and collaboration.
                            </p>
                        </div>
                    </div>
                    
                    <div style="background: #FEF2F2; border: 2px solid #F87171; padding: 18px; border-radius: 12px;">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                            <div style="width: 36px; height: 36px; border-radius: 50%; background: #DC2626; color: white; display: flex; align-items: center; justify-content: center; font-size: 20px;">‚ö†Ô∏è</div>
                            <h4 style="font-size: 17px; font-weight: 700; color: #991B1B; margin: 0;">
                                Pitfall #3: Ignoring Context & Constraints
                            </h4>
                        </div>
                        <p style="color: var(--dark); line-height: 1.8; margin-bottom: 12px; font-size: 15px;">
                            <strong>The Problem:</strong> Applying techniques without considering specific circumstances, resources, or constraints yields suboptimal or inappropriate results. Cookie-cutter solutions rarely fit perfectly.
                        </p>
                        <div style="background: white; padding: 14px; border-radius: 8px; border-left: 3px solid #10B981;">
                            <p style="margin: 0; color: var(--dark); line-height: 1.7; font-size: 14.5px;">
                                <strong>‚úÖ Prevention Strategy:</strong> Always analyze your specific situation thoroughly before selecting approaches. Adapt general principles to fit your unique context, available resources, timeline, and objectives. What works brilliantly in one scenario might fail in another‚Äîcontext matters immensely.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title" style="margin-bottom: 16px;">üéØ Hands-On Practice Exercise</h3>
                    <p style="color: var(--dark); line-height: 1.8; margin-bottom: 16px; font-size: 15px;">
                        <strong>Time to apply your knowledge\!</strong> Complete this practical exercise to reinforce learning:
                    </p>
                    
                    <div style="background: linear-gradient(135deg, #EEF2FF 0%, #E0E7FF 100%); border: 3px solid #6366F1; padding: 24px; border-radius: 14px;">
                        <h4 style="font-size: 18px; font-weight: 800; color: #4F46E5; margin-bottom: 14px; display: flex; align-items: center; gap: 10px;">
                            <span style="font-size: 28px;">üìã</span> Exercise: Real-World Application of ${lessonTitle}
                        </h4>
                        
                        <div style="background: white; padding: 18px; border-radius: 10px; margin-bottom: 16px;">
                            <p style="color: var(--dark); line-height: 1.8; margin-bottom: 16px; font-size: 15px;">
                                Think of a real challenge from your life, work, or studies where ${lessonTitle} could be applied. 
                                Work through each step methodically‚Äîthis isn't busywork, it's deliberate practice that cements understanding.
                            </p>
                            
                            <ol style="color: var(--dark); line-height: 2; padding-left: 24px; margin-bottom: 16px; font-size: 15px;">
                                <li style="margin-bottom: 12px;"><strong>Identify the Situation:</strong> Describe the problem or opportunity in detail. What's the current state? What's the desired outcome?</li>
                                <li style="margin-bottom: 12px;"><strong>Apply Principles:</strong> Which core principles from this lesson are most relevant? Explain why each applies to your situation.</li>
                                <li style="margin-bottom: 12px;"><strong>Design Your Approach:</strong> Create a step-by-step plan using the implementation guide. What will you do in each phase?</li>
                                <li style="margin-bottom: 12px;"><strong>Anticipate Challenges:</strong> What could go wrong? How will you prevent or address these issues using best practices learned?</li>
                                <li style="margin-bottom: 0;"><strong>Define Success Metrics:</strong> How will you know if your approach works? What specific, measurable outcomes indicate success?</li>
                            </ol>
                        </div>
                        
                        <div style="background: linear-gradient(to right, #FEF3C7, #FDE68A); padding: 16px; border-radius: 10px; border-left: 4px solid #F59E0B;">
                            <p style="margin: 0; color: #92400E; font-size: 14.5px; line-height: 1.8;">
                                <strong>üí° Bonus Challenge:</strong> Share your completed exercise with a peer, mentor, or study group. Discussing your approach helps solidify understanding and often reveals perspectives you hadn't considered. Teaching others what you've learned is one of the most effective ways to master material.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title" style="margin-bottom: 16px;">üéì Essential Takeaways</h3>
                    <p style="color: var(--dark); line-height: 1.8; margin-bottom: 20px; font-size: 15px;">
                        Let's consolidate what you've learned. These key points form the foundation of your understanding:
                    </p>
                    
                    <div style="background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%); border-left: 5px solid #F59E0B; padding: 24px; border-radius: 12px;">
                        <ul style="color: var(--dark); line-height: 2.2; padding-left: 24px; margin: 0; font-size: 15px;">
                            <li style="margin-bottom: 16px;">
                                <strong>${lessonTitle}</strong> represents a fundamental concept requiring both deep theoretical understanding and extensive practical application. Mastery demands integrating knowledge with hands-on experience.
                            </li>
                            <li style="margin-bottom: 16px;">
                                <strong>Three core principles</strong> underpin everything: solid foundational understanding, systematic application of proven processes, and commitment to continuous improvement through iteration.
                            </li>
                            <li style="margin-bottom: 16px;">
                                <strong>Real-world applications</strong> demonstrate versatility across contexts‚Äîprofessional environments, educational settings, and personal projects all benefit from these frameworks.
                            </li>
                            <li style="margin-bottom: 16px;">
                                <strong>Implementation follows four phases:</strong> thorough preparation and analysis, careful design and planning, systematic execution with monitoring, and comprehensive review with optimization.
                            </li>
                            <li style="margin-bottom: 16px;">
                                <strong>Best practices accelerate learning:</strong> deliberate practice, continuous feedback loops, thorough documentation, embracing productive failure, and staying current with developments.
                            </li>
                            <li style="margin-bottom: 16px;">
                                <strong>Common pitfalls are preventable:</strong> Avoid skipping fundamentals, resist overengineering solutions, and always consider context‚Äîthese mistakes derail even experienced practitioners.
                            </li>
                            <li style="margin-bottom: 0;">
                                <strong>Remember: Mastery is a journey.</strong> Every expert started as a beginner. Progress comes from persistent effort, continuous learning, staying curious, seeking feedback, and never stopping improvement. You have all the tools needed‚Äînow apply them consistently.
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title" style="margin-bottom: 16px;">üìö Continue Your Learning Journey</h3>
                    <p style="color: var(--dark); line-height: 1.8; margin-bottom: 20px; font-size: 15px;">
                        Want to deepen expertise further? Explore these carefully selected resources:
                    </p>
                    
                    <div style="display: grid; gap: 14px;">
                        <div style="background: linear-gradient(to right, #F0F9FF, #E0F2FE); padding: 18px; border-radius: 12px; border-left: 4px solid #3B82F6;">
                            <h4 style="font-size: 16px; font-weight: 700; color: #1E40AF; margin-bottom: 10px; display: flex; align-items: center; gap: 8px;">
                                <span>üìñ</span> Recommended Reading Materials
                            </h4>
                            <p style="color: var(--dark); line-height: 1.7; margin: 0; font-size: 14.5px;">
                                Seek authoritative books, research papers, and articles on ${lessonTitle}. Prioritize materials offering both theoretical foundations and practical examples. Look for authors with proven expertise and real-world experience in applying these concepts.
                            </p>
                        </div>
                        
                        <div style="background: linear-gradient(to right, #FEF3C7, #FEF9C3); padding: 18px; border-radius: 12px; border-left: 4px solid #F59E0B;">
                            <h4 style="font-size: 16px; font-weight: 700; color: #92400E; margin-bottom: 10px; display: flex; align-items: center; gap: 8px;">
                                <span>üé•</span> Video Courses & Tutorials
                            </h4>
                            <p style="color: var(--dark); line-height: 1.7; margin: 0; font-size: 14.5px;">
                                Visual learners benefit enormously from video content demonstrating concepts in action. Search for courses on reputable educational platforms taught by recognized experts. Look for content with practical demonstrations, not just lecture slides.
                            </p>
                        </div>
                        
                        <div style="background: linear-gradient(to right, #F0FDF4, #DCFCE7); padding: 18px; border-radius: 12px; border-left: 4px solid #10B981;">
                            <h4 style="font-size: 16px; font-weight: 700; color: #065F46; margin-bottom: 10px; display: flex; align-items: center; gap: 8px;">
                                <span>üë•</span> Professional Communities & Forums
                            </h4>
                            <p style="color: var(--dark); line-height: 1.7; margin: 0; font-size: 14.5px;">
                                Join online communities where practitioners discuss ${lessonTitle}. Active participation provides diverse perspectives, keeps you updated on latest developments, and connects you with mentors. Don't just lurk‚Äîask questions, share insights, help others.
                            </p>
                        </div>
                        
                        <div style="background: linear-gradient(to right, #FCE7F3, #FBE2F2); padding: 18px; border-radius: 12px; border-left: 4px solid #EC4899;">
                            <h4 style="font-size: 16px; font-weight: 700; color: #9F1239; margin-bottom: 10px; display: flex; align-items: center; gap: 8px;">
                                <span>üî¨</span> Hands-On Practice Projects
                            </h4>
                            <p style="color: var(--dark); line-height: 1.7; margin: 0; font-size: 14.5px;">
                                Nothing beats practical experience. Create personal projects applying ${lessonTitle} concepts. Start small, gradually increase complexity. Document your process, reflect on lessons learned. These projects become portfolio pieces demonstrating your capabilities.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="card" style="background: linear-gradient(135deg, #6366F1 0%, #4F46E5 100%); color: white; border: none;">
                    <div style="text-align: center; padding: 10px 0;">
                        <div style="font-size: 52px; margin-bottom: 16px;">üéâ</div>
                        <h3 style="font-size: 26px; font-weight: 800; margin-bottom: 14px;">
                            Congratulations on Completing This Lesson\!
                        </h3>
                        <p style="line-height: 1.9; margin-bottom: 24px; opacity: 0.95; font-size: 15.5px; max-width: 600px; margin-left: auto; margin-right: auto;">
                            You've completed a comprehensive, in-depth lesson on <strong>${lessonTitle}</strong>. You now possess solid theoretical foundations, practical implementation knowledge, and awareness of best practices. This is just the beginning‚Äîmastery awaits through consistent application\!
                        </p>
                        <div style="background: rgba(255,255,255,0.15); padding: 16px; border-radius: 10px; margin-bottom: 24px;">
                            <p style="margin: 0; font-size: 14.5px; line-height: 1.8; opacity: 0.95;">
                                <strong>üåü Next Steps:</strong> Review your notes, complete the practice exercise, apply concepts to real projects, and revisit this lesson periodically to reinforce learning. Knowledge becomes mastery through repetition and application.
                            </p>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; max-width: 500px; margin: 0 auto;">
                            <button class="btn" style="background: rgba(255,255,255,0.2); color: white; border: 2px solid rgba(255,255,255,0.4); backdrop-filter: blur(10px);" onclick="goBackToCourseViewer()">
                                <span>üìö</span> Back to Course
                            </button>
                            <button class="btn" style="background: white; color: var(--primary); font-weight: 700;" onclick="goBackToCourseViewer()">
                                <span>‚Üí</span> Next Lesson
                            </button>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('lessonViewerContent').innerHTML = html;
            navigateTo('lesson-viewer');
        }

        // ========== UTILITIES ==========
        function showNotifications() {
            showToast('üîî No new notifications');
        }

        function showProfile() {
            navigateTo('learner');
        }

        // Toast notification helper
        function showToast(message, duration = 3000) {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            document.body.appendChild(toast);

            setTimeout(() => {
                toast.classList.add('hiding');
                setTimeout(() => {
                    document.body.removeChild(toast);
                }, 300);
            }, duration);
        }

        // Filter courses by search
        function filterCourses(searchTerm) {
            const courses = JSON.parse(localStorage.getItem('courses') || '[]');
            const filtered = courses.filter(course =>
                course.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
                (course.difficulty && course.difficulty.toLowerCase().includes(searchTerm.toLowerCase()))
            );

            const coursesList = document.getElementById('coursesList');
            if (filtered.length === 0 && searchTerm) {
                coursesList.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">üîç</div>
                        <h3 class="empty-title">No courses found</h3>
                        <p class="empty-text">Try a different search term</p>
                    </div>
                `;
            } else if (filtered.length === 0) {
                // Show default empty state
                coursesList.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">üìö</div>
                        <h3 class="empty-title">No courses yet</h3>
                        <p class="empty-text">Generate your first AI-powered course from any website!</p>
                        <button class="btn btn-primary mt-2" onclick="navigateTo('upload')">
                            <span>üì§</span> Generate Course
                        </button>
                    </div>
                `;
            } else {
                coursesList.innerHTML = filtered.map(course => `
                    <div class="course-item" onclick="viewCourse('${course.id}')">
                        <div class="course-icon" style="background: linear-gradient(135deg, #6366F1 0%, #4F46E5 100%); color: white;">
                            ${course.icon || 'üìò'}
                        </div>
                        <div class="course-info">
                            <div class="course-title">${course.title}</div>
                            <div class="course-meta">
                                <span>üìä ${course.difficulty || 'Beginner'}</span>
                                <span>‚è±Ô∏è ${course.modules ? course.modules.length : 0} modules</span>
                            </div>
                            <div class="progress-bar" style="margin-top: 8px;">
                                <div class="progress-fill" style="width: ${course.progress || 0}%"></div>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
        }

        // Prevent zoom on double-tap
        let lastTouchEnd = 0;
        document.addEventListener('touchend', (event) => {
            const now = Date.now();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);

        console.log('[Mentora] App initialized successfully!');

        // ========== ANDROID BRIDGE INTEGRATION ==========
        // This preserves ALL your AI logic from the original app

        console.log('[AndroidBridge] Initializing...');
        window.isAndroidApp = typeof Android !== 'undefined';

        if (window.isAndroidApp) {
            console.log('[AndroidBridge] Android interface detected!');

            // The generateCourse function already calls Android.generateCourseContent
            // which is handled by your WebAppInterface.kt

            // Add any additional Android-specific initialization here
            console.log('[AndroidBridge] All AI functions ready!');
        } else {
            console.log('[AndroidBridge] Running in browser mode (mock data)');
        }
</script>
</body>
</html>